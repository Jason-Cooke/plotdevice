<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN">
<html><head>
  <meta content="text/html; charset=utf-8" http-equiv="Content-Type"/>

  <title>PlotDevice Libraries: Layer.pixels.update()</title>
  <link charset="utf-8" href="../../etc/manual.css" rel="stylesheet" type="text/css"/>

</head><body>
  <div class="link" id="nav">
    <h1><a href="../../manual.html">Plotâ€ŠDevice <span>Libraries</span></a></h1>

    <h3>Layer.pixels.update()</h3>
  </div>

  <div class="article">
    <h2>Syntax</h2>
<pre>
<span class="nf">canvas</span><span class="o">.</span>layers[i]<span class="o">.</span>pixels<span class="o">.</span>update()
</pre>

    <h2>Description</h2>

    <p>Updates the pixels array of layer <em>i</em> after it has been modified. To save time,
    changes to the <a href="Layer.pixels[].html">Layer.pixels[]</a> pixels array only take effect
    after calling this command.</p>
    <h2>Example</h2>

    <p>Remove all white pixels from the given image, with a feather at the edges of white areas:</p>
<pre>photobot <span class="o">=</span> <span class="nf">ximport</span>(<span class="s">"photobot"</span>)
<span class="nf">canvas</span> <span class="o">=</span> photobot<span class="o">.</span><span class="nf">canvas</span>(<span class="mi">200</span>,<span class="mi">200</span>)
<span class="nf">canvas</span><span class="o">.</span>layer(<span class="s">"smurf.gif"</span>)
 
w <span class="o">=</span> <span class="nf">canvas</span><span class="o">.</span>layers[<span class="mi">1</span>]<span class="o">.</span>w
feather <span class="o">=</span> [<span class="o">-</span>w<span class="o">-</span><span class="mi">1</span>, <span class="o">-</span>w, <span class="o">-</span>w<span class="o">+</span><span class="mi">1</span>, <span class="o">-</span><span class="mi">1</span>, <span class="mi">1</span>, w<span class="o">-</span><span class="mi">1</span>, w, w<span class="o">+</span><span class="mi">1</span>]
 
pixels <span class="o">=</span> <span class="nf">canvas</span><span class="o">.</span>layers[<span class="mi">1</span>]<span class="o">.</span>pixels
<span class="k">for</span> i <span class="ow">in</span> <span class="nb">range</span>(<span class="nb">len</span>(pixels)):
    r, g, b, a <span class="o">=</span> pixels[i]
    <span class="k">if</span> r <span class="o">==</span> g <span class="o">==</span> b <span class="o">==</span> <span class="mi">255</span>: 
        pixels[i] <span class="o">=</span> r, g, b, <span class="mi">0</span>
        <span class="k">for</span> j <span class="ow">in</span> feather:
            r, g, b, a <span class="o">=</span> pixels[i<span class="o">+</span>j]
            pixels[i<span class="o">+</span>j] <span class="o">=</span> r, g, b, a<span class="o">/</span><span class="mi">2</span>            
 
pixels<span class="o">.</span>update()
</pre>
  </div>

</body></html>