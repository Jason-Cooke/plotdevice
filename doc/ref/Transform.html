<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN">
<html><head>
  <meta content="text/html; charset=utf-8" http-equiv="Content-Type"/>

  <title>NodeBox Reference: Transform</title>
  <link charset="utf-8" href="../nodebox.css" rel="stylesheet" type="text/css"/>

</head><body>
  <div class="link" id="nav">
    <h1><a href="../manual.html">NodeBox <span>Reference</span></a></h1>

    <ul class="siblings">
      <li><a href="Primitives.html">Primitives</a>
      </li><li><a href="Path.html">Path</a>
      </li><li>
        <h3 style="margin:0;">Transform</h3>
      </li><li><a href="Color.html">Color</a>
      </li><li><a href="Typography.html">Typography</a>
      </li><li><a href="Utility.html">Utility</a>
      </li><li><a href="Classes.html">Classes</a>
      </li><li><a href="Globals.html">Globals</a>
    </li></ul>
  </div>

  <div class="article">
    <a name="transform()"></a>

    <div class="section">
      <h3>transform()</h3>

      <div class="definition">
        <h2>Syntax</h2>

        <div class="row">
<pre>
<span class="kw">transform</span><span class="s">(</span>mode=<span class="kw">CENTER</span><span class="s">, *transforms)</span>
</pre>
<pre>
<span class="kw">with transform</span>(mode=<span class="kw">CENTER</span>, *transforms) <span class="kw">as</span> t:
</pre>
        </div>

        <h2>Description</h2>

        <div class="row">
          <p>The <code>mode</code> parameter sets the registration point – the offset for <a href="#rotate()">rotate()</a>, <a href="#scale()">scale()</a> and <a href="#skew()">skew()</a>
          commands. By default, shapes, paths, text and images rotate around their own centerpoint.
          transform() can be called with an optional first-parameter of <code><span class="kw">CORNER</span></code> to rotate and skew around the canvas’s upper left corner.</p>
          <p>When called as part of a <code class="kw">with</code> block, any subsequent
          transformation calls will apply only within the block. At the end of the block, the
          transformation state will be reset to what it was before the transform() call. This is
          equivalent to calling <a href="#push()">push()</a> and <a href="#pop()">pop()</a> at the
          beginning and end of the block respectively, though transform() will also reset the
          <code>mode</code> on exit.</p>
          <table border="0">
            <tbody>
              <tr>
                <td>
<pre>
oldmode = <span class="kw">transform</span>()
<span class="kw">transform</span>(<span class="kw">CORNER</span>)
<span class="kw">push</span>()
<span class="kw">translate</span>(100,20)
<span class="kw">line</span>(0,0, 40,0)
<span class="kw">pop</span>()
<span class="kw">transform</span>(oldmode)
            
</pre>
                </td><td><em>simplifies to</em>
                </td><td>
<pre>
with <span class="kw">transform</span>(<span class="kw">CORNER</span>):
    <span class="kw">translate</span>(100,20)
    <span class="kw">line</span>(0,0, 40,0)
</pre>
                </td></tr></tbody></table>
        </div>

        <h2>Inline Transformations</h2>

        <div class="row">
          <p>In addition to the optional <code>mode</code> parameter, the transform() function will
          also search its arguments for transformation commands. Each command can be listed by name
          and followed by its argument (if any).</p>
          <p>When used in a <code>with</code>-statement, the commands will be applied at the
          beginning of the block and then reset at the end. For example, the following usages are
          equivalent:</p>
          <table border="0">
            <tbody>
              <tr>
                <td>
<pre>
<span class="kw">with transform</span>():
    <span class="kw">reset</span>()
    <span class="kw">translate</span>(40,40)
    <span class="kw">rotate</span>(45)
    <span class="kw">rect</span>(0,0,20,20)
</pre>
                </td><td>
<pre>
<span class="kw">with transform</span>(<span class="kw">reset</span>, <span class="kw">translate</span>, (40,40), <span class="kw">rotate</span>, 45):
    <span class="kw">rect</span>(0,0,20,20)
</pre>
                </td></tr></tbody></table>
        </div>

        <h2>Returns</h2>

        <div class="row">
          <p>When called as a simple function, returns the current transform mode (<code class="kw">CORNER</code> or <code class="kw">CENTER</code>).</p>
<pre>
<span class="kw">print</span> <span class="str">"initial mode:"</span>, <span class="kw">transform</span>()
<span class="kw">print</span> <span class="str">"new mode:"</span>, <span class="kw">transform</span>(<span class="kw">CORNER</span>)
<span class="grey">&gt;&gt;&gt; initial mode: CENTER</span>
<span class="grey">&gt;&gt;&gt; new mode: CORNER</span>
</pre>

          <p>Alternately, the <a href="Classes.html#Transform"><code>Transform</code></a> assembled
          in a <code>with</code> block can be captured using the <code class="kw">as</code>
          construct and can be applied to <a href="Classes.html#BezierPath"><code>BezierPath</code></a> and <code>Point</code> objects even
          after the block has completed:</p>
<pre>
<span class="kw">with transform</span>(<span class="kw">CORNER</span>) <span class="kw">as</span> t: <span class="grey"># define a Transform object in the `t` variable</span>
    <span class="kw">skew</span>(20.0)
square = <span class="kw">rect</span>(20,20,40,40, fill=0.7) <span class="grey"># a non-transfomed square</span>
parallelogram = t.<span class="kw">apply</span>(square) <span class="grey"># create a skewed copy of the square</span>
<span class="kw">bezier</span>(parallelogram, fill=<span class="kw">None</span>, stroke=0)
</pre>
        </div>

        <h2>Tutorial</h2>

        <div class="row">
          <a href="../tut/Graphics_State.html">Graphics State</a>
        </div>

        <h2>Examples</h2>

        <div class="row">
          <table border="0">
            <tbody>
              <tr>
                <td><span class="image_border"><img height="125" src="media/pop.jpg" width="125"/></span>
                </td><td>
<pre>
<span class="kw">fill</span>(0.2)
<span class="kw">fontsize</span>(14)
<span class="kw">rotate</span>(90)
<span class="kw">text</span>(<span class="str">"one"</span>, 40, 80)
 
<span class="kw">with</span> <span class="kw">transform</span>(<span class="kw">rotate</span>, -90):
    <span class="kw">text</span>(<span class="str">"two"</span>, 40, 40)
 
<span class="kw">text</span>(<span class="str">"three"</span>, 50, 80)
</pre>
                </td><td><em>or</em>
                </td><td>
<pre>
<span class="kw">fill</span><span class="s">(</span><span class="s">0.2</span><span class="s">)</span>
<span class="kw">fontsize</span><span class="s">(</span><span class="s">14</span><span class="s">)</span>
<span class="kw">rotate</span><span class="s">(</span><span class="s">90</span><span class="s">)</span>
<span class="kw">text</span><span class="s">(</span><span class="str">"one"</span>, <span class="s">40</span>, <span class="s">80</span><span class="s">)</span>

<span class="kw">push</span><span class="s">(</span><span class="s">)</span>
<span class="kw">rotate</span><span class="s">(</span><span class="s">-90</span><span class="s">)</span>
<span class="kw">text</span><span class="s">(</span><span class="str">"two"</span>, <span class="s">40</span>, <span class="s">40</span><span class="s">)</span>
<span class="kw">pop</span><span class="s">(</span><span class="s">)</span>

<span class="kw">text</span><span class="s">(</span><span class="str">"three"</span>, <span class="s">50</span>, <span class="s">80</span><span class="s">)</span>
</pre>
                </td></tr></tbody></table>
        </div>
      </div>
    </div><a name="reset()"></a>

    <div class="section">
      <h3>reset()</h3>

      <div class="definition">
        <h2>Syntax</h2>

        <div class="row">
<pre>
<span class="kw">reset</span><span class="s">(</span><span class="s">)</span>
</pre>
        </div>

        <h2>Description</h2>

        <div class="row">
          Resets all transformations to their default values. NodeBox is a so-called state-machine.
          For example, once rotate(90) is called, all subsequent shapes, paths, text and images are
          rotated 90 degrees. The rotation state is 90 degrees. If <a href="#rotate()">rotate()</a>
          is called again, for example rotate(30), the rotation state becomes 120 degrees (90+30).
          Once reset() is called, the rotation state becomes 0 degrees (the default rotation)
          again.
        </div>

        <h2>Tutorial</h2>

        <div class="row">
          <a href="../tut/Graphics_State.html">Graphics State</a> 
        </div>

        <h2>Example</h2>

        <div class="row">
          <table border="0">
            <tbody>
              <tr>
                <td><span class="image_border"><img alt="GCD" height="125" src="media/reset.jpg" width="125"/></span>
                </td><td>
<pre>
<span class="kw">fill</span><span class="s">(</span><span class="s">0.2</span><span class="s">)</span>
<span class="kw">fontsize</span><span class="s">(</span><span class="s">14</span><span class="s">)</span>
<span class="kw">rotate</span><span class="s">(</span><span class="s">90</span><span class="s">)</span>
<span class="kw">text</span><span class="s">(</span><span class="str">"one"</span>, <span class="s">30</span>, <span class="s">80</span><span class="s">)</span>
<span class="kw">text</span><span class="s">(</span><span class="str">"two"</span>, <span class="s">45</span>, <span class="s">80</span><span class="s">)</span>
 
<span class="kw">reset</span><span class="s">(</span><span class="s">)</span>
<span class="kw">text</span><span class="s">(</span><span class="str">"three"</span>, <span class="s">70</span>, <span class="s">80</span><span class="s">)</span>
</pre>
                </td></tr></tbody></table>
        </div>
      </div>
    </div><a name="rotate()"></a>

    <div class="section">
      <h3>rotate()</h3>

      <div class="definition">
        <h2>Syntax</h2>

        <div class="row">
<pre>
<span class="kw">rotate</span><span class="s">(</span>degrees=<span class="s">0</span>, radians=<span class="s">0</span><span class="s">)</span>
</pre>
        </div>

        <h2>Description</h2>

        <div class="row">
          Rotates all subsequent shape, path, text, image commands. The rotate() command is called
          with one parameter, by default specifying the angle in degrees. Optionally, the angle can
          be specified in radians, by calling rotate(radians=0.5) for example. The rotate() command
          works incrementally: if you call rotate(30), and later on call rotate(60), all commands
          following that second rotate() will be rotated 90 degrees (30+60).
        </div>

        <h2>Tutorial</h2>

        <div class="row">
          <a href="../tut/Graphics_State.html">Graphics State</a> 
        </div>

        <h2>Example</h2>

        <div class="row">
          <table border="0">
            <tbody>
              <tr>
                <td><span class="image_border"><img height="125" src="media/rotate.jpg" width="125"/></span>
                </td><td>
<pre>
<span class="kw">fill</span><span class="s">(</span><span class="s">0.2</span><span class="s">)</span>
<span class="kw">rotate</span><span class="s">(</span><span class="s">-45</span><span class="s">)</span>
<span class="kw">rect</span><span class="s">(</span><span class="s">30</span>, <span class="s">30</span>, <span class="s">40</span>, <span class="s">40</span><span class="s">)</span>
</pre>
                </td></tr></tbody></table>
        </div>
      </div>
    </div><a name="scale()"></a>

    <div class="section">
      <h3>scale()</h3>

      <div class="definition">
        <h2>Syntax</h2>

        <div class="row">
<pre>
<span class="kw">scale</span><span class="s">(</span>x, y=<span class="kw">None</span><span class="s">)</span>
</pre>
        </div>

        <h2>Description</h2>

        <div class="row">
          Increases, decreases or streches the size of all subsequent shape, path, text, image
          commands. The first parameter sets the horizontal scale, the second parameter the
          vertical scale. Additionally, the scale() command can be called with a single parameter
          that sets both the horizontal and vertical scale. Scale values are specified as
          floating-point (decimal) numbers. The scale() command works incrementally: if you call
          scale(0.5), and later on call scale(0.2), all commands following that second scale() will
          be sized to 10 percent (0.2 of 0.5).
        </div>

        <h2>Tutorial</h2>

        <div class="row">
          <a href="../tut/Graphics_State.html">Graphics State</a> 
        </div>

        <h2>Example</h2>

        <div class="row">
          <table border="0">
            <tbody>
              <tr>
                <td><span class="image_border"><img height="125" src="media/scale.jpg" width="125"/></span>
                </td><td>
<pre>
<span class="kw">fill</span><span class="s">(</span><span class="s">0.2</span><span class="s">)</span>
<span class="kw">rect</span><span class="s">(</span><span class="s">10</span>, <span class="s">10</span>, <span class="s">40</span>, <span class="s">40</span><span class="s">)</span>
<span class="kw">scale</span><span class="s">(</span><span class="s">0.5</span><span class="s">)</span>
<span class="kw">rect</span><span class="s">(</span><span class="s">50</span>, <span class="s">10</span>, <span class="s">40</span>, <span class="s">40</span><span class="s">)</span>
</pre>
                </td></tr></tbody></table>
        </div>
      </div>
    </div><a name="skew()"></a>

    <div class="section">
      <h3>skew()</h3>

      <div class="definition">
        <h2>Syntax</h2>

        <div class="row">
<pre>
<span class="kw">skew</span><span class="s">(</span>x, y=<span class="kw">None</span><span class="s">)</span>
</pre>
        </div>

        <h2>Description</h2>

        <div class="row">
          Slants the direction of all subsequent shape, path, text, image commands. The first
          parameter sets the horizontal skew. The second parameter is optional and sets the
          vertical skew. The skew() command works incrementally: if you call skew(10), and later on
          call skew(20), all commands following that second skew() will be skewed by 30 (10+20).
        </div>

        <h2>Tutorial</h2>

        <div class="row">
          <a href="../tut/Graphics_State.html">Graphics State</a> 
        </div>

        <h2>Example</h2>

        <div class="row">
          <table border="0">
            <tbody>
              <tr>
                <td><span class="image_border"><img height="125" src="media/skew.jpg" width="125"/></span>
                </td><td>
<pre>
<span class="kw">fill</span><span class="s">(</span><span class="s">0.2</span><span class="s">)</span>
<span class="kw">skew</span><span class="s">(</span><span class="s">10.0</span><span class="s">)</span>
<span class="kw">rect</span><span class="s">(</span><span class="s">20</span>, <span class="s">10</span>, <span class="s">40</span>, <span class="s">40</span><span class="s">)</span>
</pre>
                </td></tr></tbody></table>
        </div>
      </div>
    </div><a name="translate()"></a>

    <div class="section">
      <h3>translate()</h3>

      <div class="definition">
        <h2>Syntax</h2>

        <div class="row">
<pre>
<span class="kw">translate</span><span class="s">(</span>x, y<span class="s">)</span>
</pre>
        </div>

        <h2>Description</h2>

        <div class="row">
          Specifies the amount to move a subsequent shape, path, text, image on the screen. The
          first parameter sets the horizontal offset, the second parameter the vertical offset.
          Translating is the same as dragging something across the screen. Or the same as moving
          the canvas registration point, which is situated in the upper left corner by default.
          Once called, all commands following translate() are repositioned, which makes translate()
          useful for positioning whole compositions of multiple elements.
        </div>

        <h2>Tutorial</h2>

        <div class="row">
          <a href="../tut/Graphics_State.html">Graphics State</a>
        </div>

        <h2>Example</h2>

        <div class="row">
          <table border="0">
            <tbody>
              <tr>
                <td><span class="image_border"><img height="125" src="media/translate.jpg" width="125"/></span>
                </td><td>
<pre>
<span class="kw">fill</span><span class="s">(</span><span class="s">0.2</span><span class="s">)</span>
<span class="kw">oval</span><span class="s">(</span><span class="s">-10</span>, <span class="s">-10</span>, <span class="s">40</span>, <span class="s">40</span><span class="s">)</span>
<span class="kw">translate</span><span class="s">(</span><span class="s">50</span>, <span class="s">50</span><span class="s">)</span>
<span class="kw">oval</span><span class="s">(</span><span class="s">-10</span>, <span class="s">-10</span>, <span class="s">40</span>, <span class="s">40</span><span class="s">)</span>
</pre>
                </td></tr></tbody></table>
        </div>
      </div>
    </div><a name="push()"></a><a name="pop()"></a>

    <div class="section">
      <h3>push() &amp; pop()</h3>

      <div class="definition">
        <h2>Syntax</h2>

        <div class="row">
<pre>
<span class="kw">push</span><span class="s">(</span><span class="s">)</span>
</pre>
<pre>
<span class="kw">pop</span><span class="s">(</span><span class="s">)</span>
</pre>
        </div>

        <h2>Description</h2>

        <div class="row">
          NodeBox is a so-called state-machine. For example, once rotate(45) is called, all
          subsequent shapes, paths, text and images are rotated 45 degrees. The rotation state is
          45 degrees. The push() and pop() commands allow for a state within a state. All
          transformations, such as <a href="#rotate()">rotate()</a> and <a href="#skew()">skew()</a>, defined between a push() and pop() call last only until pop() is
          called. Thereafter the previous state is used. For example, a rotate(-30) within a
          rotate(45) means a rotation state of 15 degrees until pop() is called and the rotation
          state becomes 45 degrees again.
        </div>

        <h2>Tutorial</h2>

        <div class="row">
          <a href="../tut/Graphics_State.html">Graphics State</a> 
        </div>

        <h2>Example</h2>

        <div class="row">
          <table border="0">
            <tbody>
              <tr>
                <td><span class="image_border"><img height="125" src="media/push.jpg" width="125"/></span>
                </td><td>
<pre>
<span class="kw">fill</span><span class="s">(</span><span class="s">0.2</span><span class="s">)</span>
<span class="kw">fontsize</span><span class="s">(</span><span class="s">14</span><span class="s">)</span>
<span class="kw">rotate</span><span class="s">(</span><span class="s">90</span><span class="s">)</span>
<span class="kw">text</span><span class="s">(</span><span class="str">"one"</span>, <span class="s">40</span>, <span class="s">80</span><span class="s">)</span>
 
<span class="kw">push</span><span class="s">(</span><span class="s">)</span>
<span class="kw">rotate</span><span class="s">(</span><span class="s">-90</span><span class="s">)</span>
<span class="kw">text</span><span class="s">(</span><span class="str">"two"</span>, <span class="s">40</span>, <span class="s">40</span><span class="s">)</span>
<span class="kw">pop</span><span class="s">(</span><span class="s">)</span>
 
<span class="kw">text</span><span class="s">(</span><span class="str">"three"</span>, <span class="s">50</span>, <span class="s">80</span><span class="s">)</span>
</pre>
                </td></tr></tbody></table>
        </div>
      </div>
    </div>
  </div>

</body></html>